{% extends 'covid/base.html' %}

{%  load static %}

{%  block content %}
    <div class="row" style="margin-top: 10px; justify-content: center;">
        <h1>Get Started</h1>
    </div>
    <div class="row" style="margin-top:10px; justify-content: center;">
        <div id="firebaseui-auth-container"></div>
        <div id="loader">Loading...</div>
    </div>
{%  endblock %}

{% block script %}
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-auth.js"></script>

    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyAPBGW6CfLo5Uc94manwLwfBGKOQNpmeyY",
            authDomain: "helping-hand-6bace.firebaseapp.com",
            projectId: "helping-hand-6bace",
            storageBucket: "helping-hand-6bace.appspot.com",
            messagingSenderId: "310339889385",
            appId: "1:310339889385:web:808387a95e4fe5eeade878",
            measurementId: "G-L40Z91F097"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
    </script>
    <script>
    var ui = new firebaseui.auth.AuthUI(firebase.auth());
    ui.start('#firebaseui-auth-container', {
          callbacks: {
            signInSuccessWithAuthResult: function(authResult, redirectUrl) {
                // User successfully signed in.
                // Return type determines whether we continue the redirect automatically
                // or whether we leave that to developer to handle.
                return true;
                },
            uiShown: function() {
                // The widget is rendered.
                // Hide the loader.
                document.getElementById('loader').style.display = 'none';
                }
            },
            signInFlow: 'popup',
            signInSuccessUrl: '/',
            signInOptions: [
                {
                    provider: firebase.auth.PhoneAuthProvider.PROVIDER_ID,
                    recaptchaParameters: {
                        type: 'image', // 'audio'
                        size: 'normal', // 'invisible' or 'compact'
                        badge: 'bottomleft' //' bottomright' or 'inline' applies to invisible.
                        },
                    defaultCountry: 'IN',
                }
            ],
            tosUrl: '/',
            privacyPolicyUrl: '/',
    });
    firebase.auth().onAuthStateChanged(function (user) {
        if (user) {
            console.log(user);
        } else {
            console.log('No luck!');
        }
    })
    </script>
{% endblock %}